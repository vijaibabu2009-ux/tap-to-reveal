<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, addDoc, collection } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDAlt16C36DGhonXf10URIhz82LroH2k3A",
  authDomain: "tap-to-reveal.firebaseapp.com",
  projectId: "tap-to-reveal",
  storageBucket: "tap-to-reveal.firebasestorage.app",
  messagingSenderId: "878205314791",
  appId: "1:878205314791:web:ce3c831e7075c27ca8a442"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

document.getElementById("generateBtn").onclick = async () => {
  const text = document.getElementById("message").value.trim();

  if (!text) {
    alert("Please enter message or link");
    return;
  }

  const docRef = await addDoc(collection(db, "links"), {
    message: text,          // ðŸ”´ THIS is the key
    createdAt: Date.now(),
    revealed: false
  });

  document.getElementById("result").innerHTML =
    `Link:<br>
     <a href="https://vijaibabu2009-ux.github.io/tap-to-reveal/index.html?id=${docRef.id}" target="_blank">
     Open Surprise ðŸ’–</a>`;
};
</script>
