<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tap to Reveal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #111;
  color: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.container {
  text-align: center;
  max-width: 360px;
  padding: 20px;
}

.tap-box {
  background: #d94f4f;
  padding: 18px;
  border-radius: 12px;
  cursor: pointer;
  margin-top: 20px;
}

.tap-box:hover {
  background: #ff6b6b;
}

.hidden {
  display: none;
}

.message {
  margin-top: 20px;
  font-size: 18px;
  line-height: 1.5;
}

video, img {
  width: 100%;
  border-radius: 12px;
  margin-top: 15px;
}
</style>
</head>

<body>

<div class="container">
  <h2 id="title">Tap to Reveal</h2>

  <!-- Optional GIF / Video -->
  <img id="gif" src="Shot_1__202601202355.gif" class="hidden">

  <div id="tapBox" class="tap-box">
    ğŸ‘† Tap Here
  </div>

  <div id="message" class="message hidden"></div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDAlt16C36DGhonXf10URIhz82LroH2k3A",
  authDomain: "tap-to-reveal.firebaseapp.com",
  projectId: "tap-to-reveal",
  storageBucket: "tap-to-reveal.firebasestorage.app",
  messagingSenderId: "878205314791",
  appId: "1:878205314791:web:ce3c831e7075c27ca8a442"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const params = new URLSearchParams(window.location.search);
const giftId = params.get("id");

const tapBox = document.getElementById("tapBox");
const messageBox = document.getElementById("message");
const title = document.getElementById("title");
const gif = document.getElementById("gif");

if (!giftId) {
  title.innerText = "Invalid Link";
  tapBox.classList.add("hidden");
}

tapBox.addEventListener("click", () => {
  db.collection("gifts").doc(giftId).get().then(doc => {
    if (!doc.exists) {
      title.innerText = "Gift not found";
      tapBox.classList.add("hidden");
      return;
    }

    const data = doc.data();

    // Auto language
    if (data.lang === "ta") {
      title.innerText = "à®¤à®¿à®±à®•à¯à®• à®¤à®Ÿà¯à®Ÿà®µà¯à®®à¯";
      tapBox.innerText = "à®¤à®Ÿà¯à®Ÿà®µà¯à®®à¯";
    }

    tapBox.classList.add("hidden");
    gif.classList.remove("hidden");
    messageBox.innerText = data.message;
    messageBox.classList.remove("hidden");
  });
});
</script>

</body>
</html>

